[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "flowML",
    "section": "",
    "text": "This book includes the notes I learn to do machine learning on flow cytometry (FC) data.\nThe source code can be found at https://github.com/ferygood/flowML."
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "There is no better way to learn than to do. Here we learn how to analyze FC data using a popular bioconductor package called flowCore.\nIn this chapter, we will try to cover all the major concepts from How-To-flowCore.\nflowCore package is that of using a standardized representation that will insure compatibility with existing technologies for data analysis and will support collaboration and interoperability of new methods as they are developed. flowCore adapts expressionSet and AnnotateDataFrame structures which are familiar to most Bioconductor users.\nIn the following articles, I try to cover the main steps of preprocessing: compensation, transformation, filtering.\n\nBiocManager::install(\"flowCore\")\n\nBioconductor version 3.15 (BiocManager 1.30.18), R 4.2.0 (2022-04-22)\n\n\nOld packages: 'bslib', 'callr', 'devtools', 'DT', 'evaluate', 'fontawesome',\n  'gert', 'htmltools', 'MASS', 'nlme', 'pillar', 'processx', 'rlang',\n  'roxygen2', 'sass', 'shiny', 'stringi', 'survival', 'tibble', 'xfun'\n\n\nLoad required library\n\nlibrary(flowCore)"
  },
  {
    "objectID": "intro.html#reading-an-fcs-file-into-a-flowframe",
    "href": "intro.html#reading-an-fcs-file-into-a-flowframe",
    "title": "1  Introduction",
    "section": "1.2 reading an FCS file into a flowFrame",
    "text": "1.2 reading an FCS file into a flowFrame\n\nfile.name <- system.file(\"extdata\", \"0877408774.B08\",\n                         package=\"flowCore\")\nx <- read.FCS(file.name, transformation=FALSE) # default is linearize transformation\nsummary(x)\n\n            FSC-H     SSC-H    FL1-H     FL2-H    FL3-H     FL1-A     FL4-H\nMin.      85.0000   11.0000   0.0000    0.0000   0.0000    0.0000    0.0000\n1st Qu.  385.0000  141.0000 233.0000  277.0000  90.0000    0.0000  210.0000\nMedian   441.0000  189.0000 545.5000  346.0000 193.0000   26.0000  279.0000\nMean     491.9644  277.9105 439.1023  366.1567 179.7122   34.0766  323.5306\n3rd Qu.  518.0000  270.0000 610.0000  437.0000 264.0000   51.0000  390.0000\nMax.    1023.0000 1023.0000 912.0000 1023.0000 900.0000 1023.0000 1022.0000\n          Time\nMin.      1.00\n1st Qu. 122.00\nMedian  288.00\nMean    294.77\n3rd Qu. 457.50\nMax.    626.00\n\n\n\nhead(x)\n\n     FSC-H SSC-H FL1-H FL2-H FL3-H FL1-A FL4-H Time\n[1,]   382    77   618     0   225    55   286    1\n[2,]   628   280   245   431   259     0   371    1\n[3,]  1023   735   699   448   215   143   638    1\n[4,]   373   128   202   354    94     0   149    1\n[5,]  1023  1023   618   742   408    61   866    1\n[6,]   489   292   179   374   154     0   363    1\n\n\n\nstr(x)\n\nFormal class 'flowFrame' [package \"flowCore\"] with 3 slots\n  ..@ exprs      : num [1:10000, 1:8] 382 628 1023 373 1023 ...\n  .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. ..$ : NULL\n  .. .. ..$ : Named chr [1:8] \"FSC-H\" \"SSC-H\" \"FL1-H\" \"FL2-H\" ...\n  .. .. .. ..- attr(*, \"names\")= chr [1:8] \"$P1N\" \"$P2N\" \"$P3N\" \"$P4N\" ...\n  .. ..- attr(*, \"ranges\")= int [1:8] 1024 1024 1024 1024 1024 1024 1024 1024\n  ..@ parameters :Formal class 'AnnotatedDataFrame' [package \"Biobase\"] with 4 slots\n  .. .. ..@ varMetadata      :'data.frame': 5 obs. of  1 variable:\n  .. .. .. ..$ labelDescription: chr [1:5] \"Name of Parameter\" \"Description of Parameter\" \"Range of Parameter\" \"Minimum Parameter Value after Transforamtion\" ...\n  .. .. ..@ data             :'data.frame': 8 obs. of  5 variables:\n  .. .. .. ..$ name    : 'AsIs' Named chr [1:8] \"FSC-H\" \"SSC-H\" \"FL1-H\" \"FL2-H\" ...\n  .. .. .. .. ..- attr(*, \"names\")= chr [1:8] \"$P1N\" \"$P2N\" \"$P3N\" \"$P4N\" ...\n  .. .. .. ..$ desc    : 'AsIs' Named chr [1:8] \"FSC-H\" \"SSC-H\" NA NA ...\n  .. .. .. .. ..- attr(*, \"names\")= chr [1:8] \"$P1S\" \"$P2S\" \"$P3S\" \"$P4S\" ...\n  .. .. .. ..$ range   : num [1:8] 1024 1024 1024 1024 1024 ...\n  .. .. .. ..$ minRange: num [1:8] 0 0 0 0 0 0 0 0\n  .. .. .. ..$ maxRange: num [1:8] 1023 1023 1023 1023 1023 ...\n  .. .. ..@ dimLabels        : chr [1:2] \"rowNames\" \"columnNames\"\n  .. .. ..@ .__classVersion__:Formal class 'Versions' [package \"Biobase\"] with 1 slot\n  .. .. .. .. ..@ .Data:List of 1\n  .. .. .. .. .. ..$ : int [1:3] 1 1 0\n  .. .. .. .. ..$ names: chr \"AnnotatedDataFrame\"\n  ..@ description:List of 147\n  .. ..$ FCSversion                : chr \"2\"\n  .. ..$ $BYTEORD                  : chr \"4,3,2,1\"\n  .. ..$ $DATATYPE                 : chr \"I\"\n  .. ..$ $NEXTDATA                 : chr \"0\"\n  .. ..$ $SYS                      : chr \"Macintosh System Software 9.2.2\"\n  .. ..$ CREATOR                   : chr \"CELLQuest<aa> 3.3\"\n  .. ..$ $TOT                      : chr \"10000\"\n  .. ..$ $MODE                     : chr \"L\"\n  .. ..$ $PAR                      : chr \"8\"\n  .. ..$ $P1N                      : chr \"FSC-H\"\n  .. ..$ $P1R                      : chr \"1024\"\n  .. ..$ $P1B                      : chr \"16\"\n  .. ..$ $P1E                      : chr \"0,0\"\n  .. ..$ $P2N                      : chr \"SSC-H\"\n  .. ..$ $P2R                      : chr \"1024\"\n  .. ..$ $P2B                      : chr \"16\"\n  .. ..$ $P2E                      : chr \"0,0\"\n  .. ..$ $P3N                      : chr \"FL1-H\"\n  .. ..$ $P3R                      : chr \"1024\"\n  .. ..$ $P3B                      : chr \"16\"\n  .. ..$ $P3E                      : chr \"4,1\"\n  .. ..$ $P4N                      : chr \"FL2-H\"\n  .. ..$ $P4R                      : chr \"1024\"\n  .. ..$ $P4B                      : chr \"16\"\n  .. ..$ $P4E                      : chr \"4,1\"\n  .. ..$ $P5N                      : chr \"FL3-H\"\n  .. ..$ $P5R                      : chr \"1024\"\n  .. ..$ $P5B                      : chr \"16\"\n  .. ..$ $P5E                      : chr \"4,1\"\n  .. ..$ $P1S                      : chr \"FSC-H\"\n  .. ..$ $P2S                      : chr \"SSC-H\"\n  .. ..$ $P3S                      : chr(0) \n  .. ..$ $P4S                      : chr(0) \n  .. ..$ $P6N                      : chr \"FL1-A\"\n  .. ..$ $P6R                      : chr \"1024\"\n  .. ..$ $P6B                      : chr \"16\"\n  .. ..$ $P6E                      : chr \"0,0\"\n  .. ..$ TIMETICKS                 : chr \"50\"\n  .. ..$ $P7N                      : chr \"FL4-H\"\n  .. ..$ $P7R                      : chr \"1024\"\n  .. ..$ $P7E                      : chr \"4,1\"\n  .. ..$ $P7B                      : chr \"16\"\n  .. ..$ $P8N                      : chr \"Time\"\n  .. ..$ $P8R                      : chr \"1024\"\n  .. ..$ $P8E                      : chr \"0,0\"\n  .. ..$ $P8B                      : chr \"16\"\n  .. ..$ $P8S                      : chr \"Time (51.20 sec.)\"\n  .. ..$ SAMPLE ID                 : chr \"Default Patient ID\"\n  .. ..$ $SRC                      : chr \"Default Patient Name\"\n  .. ..$ CASE NUMBER               : chr \"Default Case Number\"\n  .. ..$ $CYT                      : chr \"FACSCalibur\"\n  .. ..$ CYTNUM                    : chr \"E5451\"\n  .. ..$ $BTIM                     : chr \"13:13:54\"\n  .. ..$ $ETIM                     : chr \"13:14:27\"\n  .. ..$ BD$AcqLibVersion          : chr \"3.1\"\n  .. ..$ BD$NPAR                   : chr \"7\"\n  .. ..$ BD$P1N                    : chr \"FSC-H\"\n  .. ..$ BD$P2N                    : chr \"SSC-H\"\n  .. ..$ BD$P3N                    : chr \"FL1-H\"\n  .. ..$ BD$P4N                    : chr \"FL2-H\"\n  .. ..$ BD$P5N                    : chr \"FL3-H\"\n  .. ..$ BD$P6N                    : chr \"FL1-A\"\n  .. ..$ BD$P7N                    : chr \"FL4-H\"\n  .. ..$ BD$WORD0                  : chr \"24\"\n  .. ..$ BD$WORD1                  : chr \"474\"\n  .. ..$ BD$WORD2                  : chr \"594\"\n  .. ..$ BD$WORD3                  : chr \"530\"\n  .. ..$ BD$WORD4                  : chr \"700\"\n  .. ..$ BD$WORD5                  : chr \"402\"\n  .. ..$ BD$WORD6                  : chr \"401\"\n  .. ..$ BD$WORD7                  : chr \"401\"\n  .. ..$ BD$WORD8                  : chr \"402\"\n  .. ..$ BD$WORD9                  : chr \"401\"\n  .. ..$ BD$WORD10                 : chr \"299\"\n  .. ..$ BD$WORD11                 : chr \"287\"\n  .. ..$ BD$WORD12                 : chr \"557\"\n  .. ..$ BD$WORD13                 : chr \"0\"\n  .. ..$ BD$WORD14                 : chr \"483\"\n  .. ..$ BD$WORD15                 : chr \"612\"\n  .. ..$ BD$WORD16                 : chr \"546\"\n  .. ..$ BD$WORD17                 : chr \"724\"\n  .. ..$ BD$WORD18                 : chr \"104\"\n  .. ..$ BD$WORD19                 : chr \"100\"\n  .. ..$ BD$WORD20                 : chr \"100\"\n  .. ..$ BD$WORD21                 : chr \"100\"\n  .. ..$ BD$WORD22                 : chr \"100\"\n  .. ..$ BD$WORD23                 : chr \"1\"\n  .. ..$ BD$WORD24                 : chr \"1\"\n  .. ..$ BD$WORD25                 : chr \"0\"\n  .. ..$ BD$WORD26                 : chr \"0\"\n  .. ..$ BD$WORD27                 : chr \"0\"\n  .. ..$ BD$WORD28                 : chr \"136\"\n  .. ..$ BD$WORD29                 : chr \"77\"\n  .. ..$ BD$WORD30                 : chr \"52\"\n  .. ..$ BD$WORD31                 : chr \"52\"\n  .. ..$ BD$WORD32                 : chr \"52\"\n  .. ..$ BD$WORD33                 : chr \"52\"\n  .. ..$ BD$WORD34                 : chr \"6\"\n  .. ..$ BD$WORD35                 : chr \"300\"\n  .. .. [list output truncated]\n\n\n\nkeyword(x, c(\"$P1E\", \"$P2E\", \"$P3E\", \"$P4E\"))\n\n$`$P1E`\n[1] \"0,0\"\n\n$`$P2E`\n[1] \"0,0\"\n\n$`$P3E`\n[1] \"4,1\"\n\n$`$P4E`\n[1] \"4,1\"\n\n\nThe default “linearize” transformation option will convert these to, effectively, have a $PnE value of “0,0”:\n\nsummary(read.FCS(file.name))\n\n            FSC-H     SSC-H      FL1-H      FL2-H       FL3-H     FL1-A\nMin.      85.0000   11.0000    1.00000    1.00000    1.000000    0.0000\n1st Qu.  385.0000  141.0000    8.13123   12.07901    2.246790    0.0000\nMedian   441.0000  189.0000  135.16485   22.46790    5.674221   26.0000\nMean     491.9644  277.9105  157.79417  105.98637    8.464880   34.0766\n3rd Qu.  518.0000  270.0000  241.44182   50.93675   10.746078   51.0000\nMax.    1023.0000 1023.0000 3651.74127 9910.45856 3278.121151 1023.0000\n             FL4-H   Time\nMin.       1.00000   1.00\n1st Qu.    6.61169 122.00\nMedian    12.29826 288.00\nMean     140.39784 294.77\n3rd Qu.   33.37625 457.50\nMax.    9821.71889 626.00\n\n\nscale transformation\n\nsummary(read.FCS(file.name, transformation=\"scale\"))\n\n             FSC-H      SSC-H        FL1-H       FL2-H        FL3-H      FL1-A\nMin.    0.08308895 0.01075269 0.0000000000 0.000000000 0.0000000000 0.00000000\n1st Qu. 0.37634409 0.13782991 0.0007131943 0.001108012 0.0001246915 0.00000000\nMedian  0.43108504 0.18475073 0.0134178268 0.002147005 0.0004674689 0.02541544\nMean    0.48090362 0.27166227 0.0156809848 0.010499687 0.0007465626 0.03331046\n3rd Qu. 0.50635386 0.26392962 0.0240465869 0.004994175 0.0009747053 0.04985337\nMax.    1.00000000 1.00000000 0.3651106383 0.991044961 0.3277448896 1.00000000\n               FL4-H         Time\nMin.    0.0000000000 0.0009775171\n1st Qu. 0.0005612251 0.1192570870\nMedian  0.0011299392 0.2815249267\nMean    0.0139411784 0.2881427175\n3rd Qu. 0.0032379485 0.4472140762\nMax.    0.9821701062 0.6119257087\n\n\nAnother parameter of interest is the alter.names parameter, which will convert the parameter names into more “R friendly” qauivalents, usually by replacing “-” with “.”;\n\nread.FCS(file.name, alter.names=TRUE)\n\nflowFrame object '0877408774.B08'\nwith 10000 cells and 8 observables:\n      name              desc     range  minRange  maxRange\n$P1  FSC.H             FSC-H      1024   0.00000      1023\n$P2  SSC.H             SSC-H      1024   0.00000      1023\n$P3  FL1.H                NA      1024   1.00904     10000\n$P4  FL2.H                NA      1024   1.00904     10000\n$P5  FL3.H                NA      1024   1.00904     10000\n$P6  FL1.A                NA      1024   0.00000      1023\n$P7  FL4.H                NA      1024   1.00904     10000\n$P8   Time Time (51.20 sec.)      1024   0.00000      1023\n164 keywords are stored in the 'description' slot"
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "2  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever."
  }
]